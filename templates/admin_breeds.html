{% extends "base.html" %}
{% block content %}
<div class="d-flex justify-content-between align-items-center mb-3">
  <h1 class="h4 mb-0">Raças</h1>
  <div class="d-flex gap-2">
    <a class="btn btn-outline-primary" href="{{ url_for('admin_colors_import') }}">Importar cores (CSV)</a>
    <a class="btn btn-primary" href="{{ url_for('admin_breed_new') }}">Nova raça</a>
  </div>
</div>

<form class="row g-2 mb-3" method="get" action="{{ url_for('admin_breeds') }}">
  <div class="col-12 col-sm-6 col-md-5 col-lg-4">
    <input class="form-control" type="text" name="q" value="{{ q }}" placeholder="Buscar raça...">
  </div>
  <div class="col-auto">
    <button class="btn btn-outline-secondary" type="submit">Buscar</button>
  </div>
  {% if q %}
  <div class="col-auto">
    <a class="btn btn-outline-dark" href="{{ url_for('admin_breeds') }}">Limpar</a>
  </div>
  {% endif %}
</form>

<div class="card p-2">
  <div class="table-responsive">
    <table class="table align-middle table-sm">
      <thead>
        <tr>
          <th>Raça</th>
          <th style="width: 280px;">Ações</th>
        </tr>
      </thead>
      <tbody>
        {% for b in breeds %}
        <tr>
          <td class="fw-medium">{{ b.name }}</td>
          <td class="d-flex flex-wrap gap-2">
            <a class="btn btn-outline-primary btn-sm" href="{{ url_for('admin_colors', breed_id=b.id) }}">Cores</a>
            <a class="btn btn-outline-secondary btn-sm" href="{{ url_for('admin_breed_edit', breed_id=b.id) }}">Editar</a>
            <form method="post" action="{{ url_for('admin_breed_delete', breed_id=b.id) }}"
                  onsubmit="return confirm('Tem certeza que deseja excluir esta raça? Essa ação não pode ser desfeita.');">
              <button class="btn btn-outline-danger btn-sm" type="submit">Excluir</button>
            </form>
          </td>
        </tr>
        {% else %}
        <tr>
          <td colspan="2" class="text-muted">Nenhuma raça encontrada{% if q %} para “{{ q }}”{% endif %}.</td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
</div>
{% endblock %}
