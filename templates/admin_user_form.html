{% extends "base.html" %}
{% block content %}
<h1 class="h5 mb-3">Editar Usuário</h1>
<div class="card p-3">
  <form method="post">
    <div class="row g-3">
      <div class="col-md-6">
        <label class="form-label">Nome</label>
        <input class="form-control" type="text" name="name" required value="{{ u.name }}">
      </div>
      <div class="col-md-3">
        <label class="form-label">Nascimento</label>
        <input class="form-control" type="date" name="dob" value="{{ u.dob }}">
      </div>
      <div class="col-md-3">
        <label class="form-label">Sexo</label>
        <input class="form-control" type="text" name="sex" value="{{ u.sex }}">
      </div>
      <div class="col-md-4">
        <label class="form-label">CPF</label>
        <input class="form-control" type="text" name="cpf" value="{{ u.cpf }}">
      </div>
      <div class="col-md-4">
        <label class="form-label">Email</label>
        <input class="form-control" type="email" name="email" required value="{{ u.email }}">
      </div>
      <div class="col-md-4">
        <label class="form-label">Telefone</label>
        <input class="form-control" type="text" name="phone" value="{{ u.phone }}">
      </div>
      <div class="col-md-6">
        <label class="form-label">Endereço</label>
        <input class="form-control" type="text" name="address" value="{{ u.address }}">
      </div>
      <div class="col-md-6">
        <label class="form-label">Complemento</label>
        <input class="form-control" type="text" name="address2" value="{{ u.address2 }}">
      </div>
      <div class="col-md-3">
        <label class="form-label">Bairro</label>
        <input class="form-control" type="text" name="district" value="{{ u.district }}">
      </div>
      <div class="col-md-3">
        <label class="form-label">Cidade</label>
        <input class="form-control" type="text" name="city" value="{{ u.city }}">
      </div>
      <div class="col-md-2">
        <label class="form-label">UF</label>
        <input class="form-control" type="text" name="state" value="{{ u.state }}" placeholder="RJ">
      </div>
      <div class="col-md-2">
        <label class="form-label">CEP</label>
        <input class="form-control" type="text" name="zipcode" value="{{ u.zipcode }}">
      </div>
      <div class="col-md-2">
        <label class="form-label">País</label>
        <input class="form-control" type="text" name="country" value="{{ u.country }}">
      </div>
      <div class="col-12 form-check mt-2">
        <input class="form-check-input" type="checkbox" id="is_admin" name="is_admin" {% if u.is_admin %}checked{% endif %}>
        <label class="form-check-label" for="is_admin">Administrador</label>
      </div>
    </div>
    <div class="mt-3 d-flex gap-2">
      <button class="btn btn-primary" type="submit">Salvar</button>
      <a class="btn btn-outline-secondary" href="{{ url_for('admin_users') }}">Cancelar</a>
    </div>
  </form>
  <hr>
<form method="post" action="{{ url_for('admin_user_reset_password', user_id=u.id) }}" onsubmit="return confirm('Gerar link de reset de senha para {{ u.email }}?');">
  <button class="btn btn-outline-warning">Gerar link de reset de senha</button>
  <small class="text-muted ms-2">O link será exibido e (opcionalmente) enviado por email.</small>
</form>

</div>
{% endblock %}
